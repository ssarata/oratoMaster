<!-- <!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Cours et Examens</title>
</head>
<body>
    <h1>Cours</h1>
    <ul>
        <li th:each="cours : ${cours}">
            <p th:text="${cours.text}"></p>
        </li>
    </ul>

    <h1>Examens</h1>
    <ul>
        <li th:each="examen : ${examens}">
            <p><strong th:text="${examen.question}"></strong></p>
            <ul>
                <li th:each="option : ${examen.options}" th:text="${option}"></li>
            </ul>
        </li>
    </ul>
</body>
</html> -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cours par Module avec Examens</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #006400; /* Vert foncé comme Thymeleaf */
            --secondary-color: #4c9900; /* Vert plus clair */
            --accent-color: #f8f9fa; /* Gris très clair */
            --dark-color: #333;
            --light-color: #f8f9fa;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f7fa;
            color: var(--dark-color);
        }
        
        .header {
            background-color: var(--primary-color);
            color: white;
            padding: 1rem 0;
            margin-bottom: 2rem;
        }
        
        .module-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
            overflow: hidden;
            border-left: 4px solid var(--primary-color);
        }
        
        .module-header {
            background-color: rgba(0, 100, 0, 0.05);
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #e9ecef;
            cursor: pointer;
        }
        
        .module-content {
            padding: 1.5rem;
        }
        
        .cours-item {
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #eee;
        }
        
        .cours-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .examen-section {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border-left: 4px solid var(--secondary-color);
        }
        
        .question-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .question-card:last-child {
            margin-bottom: 0;
        }
        
        .option-item {
            display: flex;
            align-items: flex-start;
            padding: 0.75rem 1rem;
            border-radius: 6px;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .option-item:hover {
            background-color: rgba(0, 100, 0, 0.05);
        }
        
        .option-item.selected {
            background-color: rgba(0, 100, 0, 0.1);
            border: 1px solid var(--primary-color);
        }
        
        .option-item input[type="radio"] {
            margin-right: 1rem;
            margin-top: 0.25rem;
        }
        
        .option-label {
            flex: 1;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-primary:hover {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
        }
        
        .btn-outline-primary {
            color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-outline-primary:hover {
            background-color: var(--primary-color);
            color: white;
        }
        
        .module-toggle {
            transition: transform 0.3s ease;
        }
        
        .module-toggle.collapsed {
            transform: rotate(-90deg);
        }
        
        .feedback-correct {
            color: #198754;
            font-weight: 500;
            display: none;
        }
        
        .feedback-incorrect {
            color: #dc3545;
            font-weight: 500;
            display: none;
        }
        
        .correct-answer {
            background-color: rgba(25, 135, 84, 0.1);
            border: 1px solid #198754;
        }
        
        .incorrect-answer {
            background-color: rgba(220, 53, 69, 0.1);
            border: 1px solid #dc3545;
        }
        
        .answer-indicator {
            margin-left: 0.5rem;
            display: none;
        }
        
        .answer-indicator.correct {
            color: #198754;
        }
        
        .answer-indicator.incorrect {
            color: #dc3545;
        }
        
        .explanation {
            background-color: #f8f9fa;
            border-radius: 6px;
            padding: 1rem;
            margin-top: 1rem;
            border-left: 4px solid #ffc107;
            display: none;
        }
        
        .sidebar {
            background-color: white;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.05);
            height: 100%;
        }
        
        .sidebar-link {
            display: flex;
            align-items: center;
            padding: 0.75rem 1.25rem;
            color: var(--dark-color);
            text-decoration: none;
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
        }
        
        .sidebar-link:hover, .sidebar-link.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .sidebar-link i {
            margin-right: 0.75rem;
            font-size: 1.1rem;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: var(--primary-color);">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="fas fa-graduation-cap me-2"></i>Art Oratoire
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-user me-1"></i>
                            <span sec:authentication="name">Utilisateur</span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="/users/profile"><i class="fas fa-user me-2"></i>Profil</a></li>
                            <li><a class="dropdown-item" href="/users/edit"><i class="fas fa-cog me-2"></i>Paramètres</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="/logout"><i class="fas fa-sign-out-alt me-2"></i>Déconnexion</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-lg-3 col-xl-2 px-0 sidebar" style="min-height: calc(100vh - 56px);">
                <div class="p-3">
                    <div class="mb-4">
                        <a href="/dashboard" class="sidebar-link">
                            <i class="fas fa-home"></i> Tableau de bord
                        </a>
                        <a href="/formation" class="sidebar-link active">
                            <i class="fas fa-graduation-cap"></i> Formation
                        </a>
                        <a href="/bibliotheque" class="sidebar-link">
                            <i class="fas fa-book"></i> Bibliothèque
                        </a>
                        <a href="/messages" class="sidebar-link">
                            <i class="fas fa-comments"></i> Messages
                        </a>
                        <a href="/certificats" class="sidebar-link">
                            <i class="fas fa-certificate"></i> Certificats
                        </a>
                        <a href="/users/profile" class="sidebar-link">
                            <i class="fas fa-user"></i> Profil
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Main Content -->
            <div class="col-lg-9 col-xl-10 py-4">
                <div class="container">
                    <h1 class="mb-4">Cours et Examens par Module</h1>
                    
                 >
                        <ul>
                            <li th:each="cours : ${cours}">
                                <p th:text="${cours.text}"></p>
                                <li th:each="examen : ${examens}">
                                    <p><strong th:text="${examen.question}"></strong></p>
                                    <ul>
                                        <li th:each="option : ${examen.options}" th:text="${option}"></li>
                                    </ul>
                                </li>
                            </li>
                        </ul>
                    
                       
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- <script>
        // Gestion des accordéons des modules
        document.querySelectorAll('.module-header').forEach(header => {
            header.addEventListener('click', function() {
                const icon = this.querySelector('.module-toggle');
                icon.classList.toggle('collapsed');
            });
        });
        
        // Fonction pour sélectionner une option
        function selectOption(element, questionName) {
            // Réinitialiser toutes les options du même groupe
            document.querySelectorAll(`input[name="q${questionName}"]`).forEach(radio => {
                radio.closest('.option-item').classList.remove('selected');
            });
            
            // Sélectionner l'option cliquée
            const radio = element.querySelector('input[type="radio"]');
            radio.checked = true;
            element.classList.add('selected');
        }
        
        // Fonction pour vérifier les réponses d'un module
        function checkAnswers(moduleIndex) {
            // Récupérer les réponses correctes du module (à adapter selon votre structure de données)
            const correctAnswers = window.moduleCorrectAnswers[moduleIndex] || {};
            
            // Parcourir toutes les questions du module
            Object.keys(correctAnswers).forEach(questionKey => {
                const correctAnswer = correctAnswers[questionKey];
                const selectedOption = document.querySelector(`input[name="q${moduleIndex}_${questionKey}"]:checked`);
                
                if (selectedOption) {
                    const selectedItem = selectedOption.closest('.option-item');
                    const questionCard = selectedItem.closest('.question-card');
                    
                    // Vérifier si la réponse est correcte
                    if (parseInt(selectedOption.value) === correctAnswer) {
                        selectedItem.classList.add('correct-answer');
                        selectedItem.querySelector('.answer-indicator.correct').style.display = 'inline-block';
                    } else {
                        selectedItem.classList.add('incorrect-answer');
                        selectedItem.querySelector('.answer-indicator.incorrect').style.display = 'inline-block';
                        
                        // Mettre en évidence la bonne réponse
                        const correctItem = questionCard.querySelectorAll('.option-item')[correctAnswer];
                        correctItem.classList.add('correct-answer');
                        correctItem.querySelector('.answer-indicator.correct').style.display = 'inline-block';
                    }
                    
                    // Afficher l'explication
                    questionCard.querySelector('.explanation').style.display = 'block';
                }
            });
            
            // Désactiver les options après soumission
            document.querySelectorAll(`input[name^="q${moduleIndex}_"]`).forEach(radio => {
                radio.disabled = true;
            });
            
            // Masquer le bouton de soumission
            document.querySelector(`button[onclick="checkAnswers(${moduleIndex})"]`).style.display = 'none';
        }
        
        // Données des réponses correctes pour chaque module
        // À remplacer par des données dynamiques côté serveur
        window.moduleCorrectAnswers = {
            0: { // Module 1
                0: 3, // Question 1, réponse d (index 3)
                1: 2  // Question 2, réponse c (index 2)
                // Ajoutez d'autres questions selon vos besoins
            },
            1: { // Module 2
                0: 1, // Question 1, réponse b (index 1)
                1: 2  // Question 2, réponse c (index 2)
                // Ajoutez d'autres questions selon vos besoins
            }
            // Ajoutez d'autres modules selon vos besoins
        };
    </script> -->
</body>
</html>
